angular.module("app",["ngRoute"]),angular.module("app").controller("ApplicationCtrl",["$scope","UserSvc",function(n,o){n.$on("login",function(o,t){n.currentUser=t,console.log(n.currentUser+"FROM MAIN CONTROLLER")}),n.logOut=function(){n.currentUser=null,o.clearToken(),console.log("LOGGED OUT")}}]),angular.module("app").controller("LoginCtrl",["$scope","UserSvc","$location",function(n,e,r){n.login=function(o,t){e.login(o,t).then(function(o){n.$emit("login",o.data),r.path("/")})}}]),angular.module("app").controller("PostsCtrl",["$scope","PostsSvc","UserSvc",function(n,o,t){n.isLogged=!1,n.close=function(){n.isLogged=!1},o.fetch().then(function(o){n.posts=o.data},function(o){console.log("Error saving data")}),n.addPost=function(){n.postBody&&(o.create({username:"donaldDuck",body:n.postBody}).then(function(o){console.log(o),n.posts.unshift(o.data),n.postBody=null},function(o){n.isLogged=!0,console.log("Error saving data")}),n.isLogged=!1)},n.$on("login",function(o,t){n.currentUser=t})}]),angular.module("app").service("PostsSvc",["$http",function(t){this.fetch=function(){return t.get("/api/posts")},this.create=function(o){return t.post("/api/posts",o)}}]),angular.module("app").controller("RegisterCtrl",["$scope","UserSvc","$location",function(o,n,e){o.register=function(o,t){n.register(o,t).then(function(o){e.path("/login")})}}]),angular.module("app").config(["$routeProvider","$locationProvider",function(o,t){o.when("/",{controller:"PostsCtrl",templateUrl:"posts.html"}).when("/register",{controller:"RegisterCtrl",templateUrl:"register.html"}).when("/login",{controller:"LoginCtrl",templateUrl:"login.html"}),t.html5Mode(!0)}]),angular.module("app").service("UserSvc",["$http",function(n){var e=this;e.getUser=function(){return n.get("/api/users")},e.login=function(o,t){return n.post("/api/sessions",{username:o,password:t}).then(function(o){return e.token=o.data,n.defaults.headers.common["X-Auth"]=o.data,e.getUser()})},e.register=function(o,t){return n.post("/api/users",{username:o,password:t}).then(function(o){console.log("User status: "+o.data)})},e.clearToken=function(){delete n.defaults.headers.common["X-Auth"]}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImFwcGxpY2F0aW9uLmN0cmwuanMiLCJsb2dpbi5jdHJsLmpzIiwicG9zdHMuY3RybC5qcyIsInBvc3RzLnN2Yy5qcyIsInJlZ2lzdGVyLmN0cmwuanMiLCJyb3V0ZXMuanMiLCJ1c2VyLnN2Yy5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29udHJvbGxlciIsIiRzY29wZSIsIlVzZXJTdmMiLCIkb24iLCJfIiwidXNlciIsImN1cnJlbnRVc2VyIiwiY29uc29sZSIsImxvZyIsImxvZ091dCIsImNsZWFyVG9rZW4iLCIkbG9jYXRpb24iLCJsb2dpbiIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJ0aGVuIiwicmVzcG9uc2UiLCIkZW1pdCIsImRhdGEiLCJwYXRoIiwiUG9zdHNTdmMiLCJpc0xvZ2dlZCIsImNsb3NlIiwiZmV0Y2giLCJwb3N0cyIsImVycm9yIiwiYWRkUG9zdCIsInBvc3RCb2R5IiwiY3JlYXRlIiwiYm9keSIsInBvc3QiLCJ1bnNoaWZ0Iiwic2VydmljZSIsIiRodHRwIiwidGhpcyIsImdldCIsInJlZ2lzdGVyIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCIkbG9jYXRpb25Qcm92aWRlciIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsImh0bWw1TW9kZSIsInN2YyIsImdldFVzZXIiLCJ2YWwiLCJ0b2tlbiIsImRlZmF1bHRzIiwiaGVhZGVycyIsImNvbW1vbiJdLCJtYXBwaW5ncyI6IkFBQUFBLFFBQUFDLE9BQUEsTUFBQSxDQUNBLFlDREFELFFBQUFDLE9BQUEsT0FFQUMsV0FBQSxrQkFBQSxDQUFBLFNBQUEsVUFBQSxTQUFBQyxFQUFBQyxHQUNBRCxFQUFBRSxJQUFBLFFBQUEsU0FBQUMsRUFBQUMsR0FDQUosRUFBQUssWUFBQUQsRUFDQUUsUUFBQUMsSUFBQVAsRUFBQUssWUFBQSwwQkFHQUwsRUFBQVEsT0FBQSxXQUNBUixFQUFBSyxZQUFBLEtBQ0FKLEVBQUFRLGFBQ0FILFFBQUFDLElBQUEsa0JDWEFWLFFBQUFDLE9BQUEsT0FFQUMsV0FBQSxZQUFBLENBQUEsU0FBQSxVQUFBLFlBQUEsU0FBQUMsRUFBQUMsRUFBQVMsR0FDQVYsRUFBQVcsTUFBQSxTQUFBQyxFQUFBQyxHQUNBWixFQUFBVSxNQUFBQyxFQUFBQyxHQUFBQyxLQUFBLFNBQUFDLEdBQ0FmLEVBQUFnQixNQUFBLFFBQUFELEVBQUFFLE1BQ0FQLEVBQUFRLEtBQUEsV0NOQXJCLFFBQUFDLE9BQUEsT0FFQUMsV0FBQSxZQUFBLENBQUEsU0FBQSxXQUFBLFVBQUEsU0FBQUMsRUFBQW1CLEVBQUFsQixHQUVBRCxFQUFBb0IsVUFBQSxFQUVBcEIsRUFBQXFCLE1BQUEsV0FDQXJCLEVBQUFvQixVQUFBLEdBR0FELEVBQUFHLFFBQUFSLEtBQUEsU0FBQVMsR0FDQXZCLEVBQUF1QixNQUFBQSxFQUFBTixNQUNBLFNBQUFPLEdBQ0FsQixRQUFBQyxJQUFBLHVCQUlBUCxFQUFBeUIsUUFBQSxXQUNBekIsRUFBQTBCLFdBQ0FQLEVBQUFRLE9BQUEsQ0FDQWYsU0FBQSxhQUNBZ0IsS0FBQTVCLEVBQUEwQixXQUNBWixLQUFBLFNBQUFlLEdBQ0F2QixRQUFBQyxJQUFBc0IsR0FDQTdCLEVBQUF1QixNQUFBTyxRQUFBRCxFQUFBWixNQUNBakIsRUFBQTBCLFNBQUEsTUFDQSxTQUFBRixHQUNBeEIsRUFBQW9CLFVBQUEsRUFDQWQsUUFBQUMsSUFBQSx1QkFFQVAsRUFBQW9CLFVBQUEsSUFLQXBCLEVBQUFFLElBQUEsUUFBQSxTQUFBQyxFQUFBQyxHQUNBSixFQUFBSyxZQUFBRCxPQ3BDQVAsUUFBQUMsT0FBQSxPQUVBaUMsUUFBQSxXQUFBLENBQUEsUUFBQSxTQUFBQyxHQUNBQyxLQUFBWCxNQUFBLFdBQ0EsT0FBQVUsRUFBQUUsSUFBQSxlQUdBRCxLQUFBTixPQUFBLFNBQUFFLEdBQ0EsT0FBQUcsRUFBQUgsS0FBQSxhQUFBQSxPQ1JBaEMsUUFBQUMsT0FBQSxPQUVBQyxXQUFBLGVBQUEsQ0FBQSxTQUFBLFVBQUEsWUFBQSxTQUFBQyxFQUFBQyxFQUFBUyxHQUNBVixFQUFBbUMsU0FBQSxTQUFBdkIsRUFBQUMsR0FDQVosRUFBQWtDLFNBQUF2QixFQUFBQyxHQUFBQyxLQUFBLFNBQUFDLEdBQ0FMLEVBQUFRLEtBQUEsZ0JDTEFyQixRQUFBQyxPQUFBLE9BRUFzQyxPQUFBLENBQUEsaUJBQUEsb0JBQUEsU0FBQUMsRUFBQUMsR0FDQUQsRUFDQUUsS0FBQSxJQUFBLENBQUF4QyxXQUFBLFlBQUF5QyxZQUFBLGVBQ0FELEtBQUEsWUFBQSxDQUFBeEMsV0FBQSxlQUFBeUMsWUFBQSxrQkFDQUQsS0FBQSxTQUFBLENBQUF4QyxXQUFBLFlBQUF5QyxZQUFBLGVBRUFGLEVBQUFHLFdBQUEsTUNSQTVDLFFBQUFDLE9BQUEsT0FFQWlDLFFBQUEsVUFBQSxDQUFBLFFBQUEsU0FBQUMsR0FDQSxJQUFBVSxFQUFBVCxLQUdBUyxFQUFBQyxRQUFBLFdBQ0EsT0FBQVgsRUFBQUUsSUFBQSxlQUlBUSxFQUFBL0IsTUFBQSxTQUFBQyxFQUFBQyxHQUNBLE9BQUFtQixFQUFBSCxLQUFBLGdCQUFBLENBQ0FqQixTQUFBQSxFQUFBQyxTQUFBQSxJQUNBQyxLQUFBLFNBQUE4QixHQUdBLE9BRkFGLEVBQUFHLE1BQUFELEVBQUEzQixLQUNBZSxFQUFBYyxTQUFBQyxRQUFBQyxPQUFBLFVBQUFKLEVBQUEzQixLQUNBeUIsRUFBQUMsYUFJQUQsRUFBQVAsU0FBQSxTQUFBdkIsRUFBQUMsR0FDQSxPQUFBbUIsRUFBQUgsS0FBQSxhQUFBLENBQ0FqQixTQUFBQSxFQUFBQyxTQUFBQSxJQUNBQyxLQUFBLFNBQUE4QixHQUNBdEMsUUFBQUMsSUFBQSxnQkFBQXFDLEVBQUEzQixTQUlBeUIsRUFBQWpDLFdBQUEsa0JBQ0F1QixFQUFBYyxTQUFBQyxRQUFBQyxPQUFBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbXHJcbiAgICAnbmdSb3V0ZSdcclxuXSlcclxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcblxyXG4uY29udHJvbGxlcignQXBwbGljYXRpb25DdHJsJywgZnVuY3Rpb24oJHNjb3BlLCBVc2VyU3ZjKSB7XHJcbiAgICAkc2NvcGUuJG9uKCdsb2dpbicsIGZ1bmN0aW9uKF8sIHVzZXIpIHtcclxuICAgICAgICAkc2NvcGUuY3VycmVudFVzZXIgPSB1c2VyXHJcbiAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmN1cnJlbnRVc2VyICsgXCJGUk9NIE1BSU4gQ09OVFJPTExFUlwiKVxyXG4gICAgfSlcclxuXHJcbiAgICAkc2NvcGUubG9nT3V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRzY29wZS5jdXJyZW50VXNlciA9IG51bGw7XHJcbiAgICAgICAgVXNlclN2Yy5jbGVhclRva2VuKCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJMT0dHRUQgT1VUXCIpXHJcbiAgICB9XHJcbn0pIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcblxyXG4uY29udHJvbGxlcignTG9naW5DdHJsJywgZnVuY3Rpb24oJHNjb3BlLCBVc2VyU3ZjLCAkbG9jYXRpb24pIHtcclxuICAgICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uICh1c2VybmFtZSwgcGFzc3dvcmQpIHtcclxuICAgICAgICBVc2VyU3ZjLmxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgJHNjb3BlLiRlbWl0KCdsb2dpbicgLCByZXNwb25zZS5kYXRhKVxyXG4gICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycpXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufSkiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuXHJcbi5jb250cm9sbGVyKCdQb3N0c0N0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCBQb3N0c1N2YywgVXNlclN2Yykge1xyXG5cclxuICAgICRzY29wZS5pc0xvZ2dlZCA9IGZhbHNlO1xyXG5cclxuICAgICRzY29wZS5jbG9zZSA9IGZ1bmN0aW9uICgpe1xyXG4gICAgICAgICRzY29wZS5pc0xvZ2dlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIFBvc3RzU3ZjLmZldGNoKCkudGhlbihmdW5jdGlvbiAocG9zdHMpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnBvc3RzID0gcG9zdHMuZGF0YVxyXG4gICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3Igc2F2aW5nIGRhdGFcIilcclxuICAgICAgICB9KVxyXG5cclxuXHJcbiAgICAkc2NvcGUuYWRkUG9zdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmKCRzY29wZS5wb3N0Qm9keSkge1xyXG4gICAgICAgUG9zdHNTdmMuY3JlYXRlKHtcclxuICAgICAgICAgICAgdXNlcm5hbWU6ICdkb25hbGREdWNrJyxcclxuICAgICAgICAgICAgYm9keTogJHNjb3BlLnBvc3RCb2R5XHJcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocG9zdCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhwb3N0KVxyXG4gICAgICAgICAgICAkc2NvcGUucG9zdHMudW5zaGlmdChwb3N0LmRhdGEpXHJcbiAgICAgICAgICAgICRzY29wZS5wb3N0Qm9keSA9IG51bGxcclxuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmlzTG9nZ2VkID0gdHJ1ZVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVycm9yIHNhdmluZyBkYXRhXCIpXHJcbiAgICAgICAgfSlcclxuICAgICAgICAkc2NvcGUuaXNMb2dnZWQgPSBmYWxzZVxyXG4gICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICAkc2NvcGUuJG9uKCdsb2dpbicsIGZ1bmN0aW9uKF8sIHVzZXIpIHtcclxuICAgICAgICAkc2NvcGUuY3VycmVudFVzZXIgPSB1c2VyXHJcbiAgICB9KVxyXG4gICAgXHJcbn0pIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcblxyXG4uc2VydmljZSgnUG9zdHNTdmMnLCBmdW5jdGlvbiAoJGh0dHApIHtcclxuICAgIHRoaXMuZmV0Y2ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9wb3N0cycpXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5jcmVhdGUgPSBmdW5jdGlvbiAocG9zdCkge1xyXG4gICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3Bvc3RzJywgcG9zdClcclxuICAgIH1cclxufSkiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuXHJcbi5jb250cm9sbGVyKCdSZWdpc3RlckN0cmwnLCBmdW5jdGlvbigkc2NvcGUsIFVzZXJTdmMsICRsb2NhdGlvbikge1xyXG4gICAgJHNjb3BlLnJlZ2lzdGVyID0gZnVuY3Rpb24gKHVzZXJuYW1lLCBwYXNzd29yZCkge1xyXG4gICAgICAgIFVzZXJTdmMucmVnaXN0ZXIodXNlcm5hbWUsIHBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2xvZ2luJylcclxuICAgICAgICAgICAvLyAkc2NvcGUuJGVtaXQoJ2xvZ2luJyAsIHJlc3BvbnNlLmRhdGEpXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufSkiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuXHJcbi5jb25maWcoZnVuY3Rpb24gKCRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xyXG4gICAgJHJvdXRlUHJvdmlkZXJcclxuICAgIC53aGVuKCcvJywgeyBjb250cm9sbGVyOiAnUG9zdHNDdHJsJywgdGVtcGxhdGVVcmw6ICdwb3N0cy5odG1sJ30pXHJcbiAgICAud2hlbignL3JlZ2lzdGVyJywgeyBjb250cm9sbGVyOiAnUmVnaXN0ZXJDdHJsJywgdGVtcGxhdGVVcmw6ICdyZWdpc3Rlci5odG1sJ30pXHJcbiAgICAud2hlbignL2xvZ2luJywgeyBjb250cm9sbGVyOiAnTG9naW5DdHJsJywgdGVtcGxhdGVVcmw6ICdsb2dpbi5odG1sJ30pO1xyXG5cclxuICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcclxufSk7XHJcblxyXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuXHJcbi5zZXJ2aWNlKCdVc2VyU3ZjJywgZnVuY3Rpb24oJGh0dHApIHtcclxuICAgIHZhciBzdmMgPSB0aGlzXHJcblxyXG5cclxuc3ZjLmdldFVzZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3VzZXJzJylcclxuXHJcbn1cclxuXHJcbnN2Yy5sb2dpbiA9IGZ1bmN0aW9uICh1c2VybmFtZSwgcGFzc3dvcmQpIHtcclxuICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3Nlc3Npb25zJywge1xyXG4gICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSwgcGFzc3dvcmQ6IHBhc3N3b3JkXHJcbiAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICBzdmMudG9rZW4gPSB2YWwuZGF0YVxyXG4gICAgICAgICRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydYLUF1dGgnXSA9IHZhbC5kYXRhXHJcbiAgICAgICAgcmV0dXJuIHN2Yy5nZXRVc2VyKClcclxuICAgIH0pXHJcbn1cclxuXHJcbnN2Yy5yZWdpc3RlciA9IGZ1bmN0aW9uICh1c2VybmFtZSwgcGFzc3dvcmQpIHtcclxuICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3VzZXJzJywge1xyXG4gICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSwgcGFzc3dvcmQ6IHBhc3N3b3JkXHJcbiAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWwpe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiVXNlciBzdGF0dXM6IFwiICsgdmFsLmRhdGEpXHJcbiAgICB9KVxyXG59XHJcblxyXG5zdmMuY2xlYXJUb2tlbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGRlbGV0ZSAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnWC1BdXRoJ11cclxuICAgXHJcbn1cclxuXHJcblxyXG59KSJdfQ==
